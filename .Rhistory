saveRDS(STD, "data/STD.rds")
runApp('server.R')
total = STD %>% group_by(State) %>% summarise (sum(Population))
View(total)
View(total)
runApp('server.R')
runApp('server.R')
runApp('server.R')
runApp('server.R')
library(shiny); runApp('server.R')
runApp('server.R')
runApp('server.R')
runApp('server.R')
runApp('server.R')
runApp('server.R')
library(shiny); runApp('server.R')
runApp('server.R')
runApp('server.R')
runApp('test3.R')
runApp('server.R')
install.packages('shinycustomloader')
runApp('server.R')
shinyExample()
runApp('server.R')
runApp('server.R')
runApp('server.R')
library(shiny); runApp('Pb_prophet.R')
rm(list=ls())
library(shiny)
library(leaflet)
library(RColorBrewer)
library(scales)
library(lattice)
library (readr)
library (dplyr)
library (geojsonio)
library (DT)
library (mapview)
library (stringr)
library (shinyjs)
library(plotly)
library(ggplot2)
library(shinythemes)
library(DiagrammeR)
library(prophet)
library(tidyr)
library(shinycustomloader)
STD = readRDS("data/STD.rds")
varsDisease = c(
"Chlamydia" = "Chlamydia",
"Gonorrhea" = "Gonorrhea",
"Primary and Secondary Syphilis" = "Primary and Secondary Syphilis",
"All" = "All"
)
states <- geojsonio::geojson_read("geojson/us-states.json", what = "sp")
ui <- fluidPage(theme = shinytheme("flatly"),
shinyjs::useShinyjs(),
navbarPage("DescarteSTD",
tabPanel ("Curve Explorer",
selectInput("statecurve", "State", states$name),
selectInput("diseasecurve", "Disease", varsDisease[1:3]),
withLoader(plotlyOutput("curve",width = "100%", height = "400px"), type = 'html', loader = "dnaspin")
)
)
)
server <- function(input, output, session) {
output$curve = renderPlotly({
plot = STD %>% filter(State == input$statecurve) %>% filter(Disease == input$diseasecurve) %>%
group_by(Year) %>% summarise(sum(STD_Cases))
colnames(plot) = c("ds", "y")
plot$ds = paste (plot$ds, "-01-01", sep = "")
newplot = prophet(plot)
future = make_future_dataframe(newplot, periods= 3650)
forecast <- predict(newplot, future)
tail(forecast[c('ds', 'yhat', 'yhat_lower', 'yhat_upper')])
plot(newplot, forecast, xlabel= "Year", ylabel = "Number of cases")
})
}
# Run the application
shinyApp(ui = ui, server = server)
library (readr)
library (dplyr)
#Creating the inputs
states <- geojsonio::geojson_read("geojson/us-states.json", what = "sp")
varsDisease = c(
"Chlamydia" = "Chlamydia",
"Gonorrhea" = "Gonorrhea",
"Primary and Secondary Syphilis" = "Primary and Secondary Syphilis",
"All" = "All"
)
varsGender = c(
"Male" = "Male",
"Female" = "Female",
"All" = "All"
)
varsAge = c(
"0-14 years" = "0-14",
"15-19 years" = "15-19",
"20-24 years" = "20-24",
"25-29 years" = "25-29",
"30-34 years" = "30-34",
"35-39 years" = "35-39",
"More than 40 years" = "40+",
"All" = "All"
)
varsEthnia = c(
"American Indian or Alaska Native" = "American Indian or Alaska Native",
"Asian or Pacific Islander" = "Asian or Pacific Islander",
"Black or African American" = "Black or African American",
"Hispanic" = "Hispanic" ,
"White" = "White"
)
#Importing STD data
ChlamydiaF <- read_delim("data/ChlamydiaF.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
ChlamydiaF = ChlamydiaF %>% mutate(Gender = "Female", Gender_Code = "F")
ChlamydiaM <- read_delim("data/ChlamydiaM.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
ChlamydiaM = ChlamydiaM %>% mutate(Gender = "Male", Gender_Code = "M")
ChlamydiaU <- read_delim("data/ChlamydiaU.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
ChlamydiaU = ChlamydiaU %>% mutate(Gender = "Unknown", Gender_Code = "U")
GonorrheaF <- read_delim("data/GonorrheaF.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
GonorrheaF = GonorrheaF %>% mutate(Gender = "Female", Gender_Code = "F")
GonorrheaM <- read_delim("data/GonorrheaM.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
GonorrheaM = GonorrheaM %>% mutate(Gender = "Male", Gender_Code = "M")
GonorrheaU <- read_delim("data/GonorrheaU.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
GonorrheaU = GonorrheaU %>% mutate(Gender = "Unknown", Gender_Code = "U")
SyphilisF <- read_delim("data/SyphilisF.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
SyphilisF = SyphilisF %>% mutate(Gender = "Female", Gender_Code = "F")
SyphilisM <- read_delim("data/SyphilisM.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
SyphilisM = SyphilisM %>% mutate(Gender = "Male", Gender_Code = "M")
SyphilisU <- read_delim("data/SyphilisU.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
SyphilisU = SyphilisU %>% mutate(Gender = "Unknown",Gender_Code = "U")
#Combining all the data in one DT for the map
STD = bind_rows (ChlamydiaF, ChlamydiaM, ChlamydiaU, GonorrheaF, GonorrheaM, GonorrheaU, SyphilisF, SyphilisM, SyphilisU)
rm (ChlamydiaF, ChlamydiaM, ChlamydiaU, GonorrheaF, GonorrheaM, GonorrheaU, SyphilisF, SyphilisM, SyphilisU) #Closing the old tables
colnames (STD) = c("Disease", "State", "Year", "Race/Ethnicity", "Age", "Age_Code", "STD_Cases", "Population", "Gender", "Gender_Code")
#Janitoring the data
temp = which (is.na(STD$"Population"))
if (length(temp) != 0) #VÃ©rifiyng that the vector isn't empty
{STD = STD[-c(temp),]}
write.csv(STD, "data/STD.csv")
saveRDS(STD, "data/STD.rds")
rm(list=ls())
library (readr)
library (dplyr)
#Creating the inputs
states <- geojsonio::geojson_read("geojson/us-states.json", what = "sp")
varsDisease = c(
"Chlamydia" = "Chlamydia",
"Gonorrhea" = "Gonorrhea",
"Primary and Secondary Syphilis" = "Primary and Secondary Syphilis",
"All" = "All"
)
varsGender = c(
"Male" = "Male",
"Female" = "Female",
"All" = "All"
)
varsAge = c(
"0-14 years" = "0-14",
"15-19 years" = "15-19",
"20-24 years" = "20-24",
"25-29 years" = "25-29",
"30-34 years" = "30-34",
"35-39 years" = "35-39",
"More than 40 years" = "40+",
"All" = "All"
)
varsEthnia = c(
"American Indian or Alaska Native" = "American Indian or Alaska Native",
"Asian or Pacific Islander" = "Asian or Pacific Islander",
"Black or African American" = "Black or African American",
"Hispanic" = "Hispanic" ,
"White" = "White"
)
#Importing STD data
ChlamydiaF <- read_delim("data/ChlamydiaF.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
ChlamydiaF = ChlamydiaF %>% mutate(Gender = "Female", Gender_Code = "F")
ChlamydiaM <- read_delim("data/ChlamydiaM.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
ChlamydiaM = ChlamydiaM %>% mutate(Gender = "Male", Gender_Code = "M")
ChlamydiaU <- read_delim("data/ChlamydiaU.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
ChlamydiaU = ChlamydiaU %>% mutate(Gender = "Unknown", Gender_Code = "U")
GonorrheaF <- read_delim("data/GonorrheaF.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
GonorrheaF = GonorrheaF %>% mutate(Gender = "Female", Gender_Code = "F")
GonorrheaM <- read_delim("data/GonorrheaM.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
GonorrheaM = GonorrheaM %>% mutate(Gender = "Male", Gender_Code = "M")
GonorrheaU <- read_delim("data/GonorrheaU.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
GonorrheaU = GonorrheaU %>% mutate(Gender = "Unknown", Gender_Code = "U")
SyphilisF <- read_delim("data/SyphilisF.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
SyphilisF = SyphilisF %>% mutate(Gender = "Female", Gender_Code = "F")
SyphilisM <- read_delim("data/SyphilisM.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
SyphilisM = SyphilisM %>% mutate(Gender = "Male", Gender_Code = "M")
SyphilisU <- read_delim("data/SyphilisU.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
SyphilisU = SyphilisU %>% mutate(Gender = "Unknown",Gender_Code = "U")
#Combining all the data in one DT for the map
STD = bind_rows (ChlamydiaF, ChlamydiaM, ChlamydiaU, GonorrheaF, GonorrheaM, GonorrheaU, SyphilisF, SyphilisM, SyphilisU)
rm (ChlamydiaF, ChlamydiaM, ChlamydiaU, GonorrheaF, GonorrheaM, GonorrheaU, SyphilisF, SyphilisM, SyphilisU) #Closing the old tables
colnames (STD) = c("Disease", "State", "Year", "Race/Ethnicity", "Age", "Age_Code", "STD_Cases", "Population", "Gender", "Gender_Code")
#Janitoring the data
temp = which (is.na(STD$"Population"))
if (length(temp) != 0) #VÃ©rifiyng that the vector isn't empty
{STD = STD[-c(temp),]}
write.csv(STD, "data/STD.csv")
saveRDS(STD, "data/STD.rds")
library(shiny); runApp('server.R')
runApp('server.R')
runApp('server.R')
runApp('server.R')
rm(list=ls())
library (readr)
library (dplyr)
#Creating the inputs
states <- geojsonio::geojson_read("geojson/us-states.json", what = "sp")
varsDisease = c(
"Chlamydia" = "Chlamydia",
"Gonorrhea" = "Gonorrhea",
"Primary and Secondary Syphilis" = "Primary and Secondary Syphilis",
"All" = "All"
)
varsGender = c(
"Male" = "Male",
"Female" = "Female",
"All" = "All"
)
varsAge = c(
"0-14 years" = "0-14",
"15-19 years" = "15-19",
"20-24 years" = "20-24",
"25-29 years" = "25-29",
"30-34 years" = "30-34",
"35-39 years" = "35-39",
"More than 40 years" = "40+",
"All" = "All"
)
varsEthnia = c(
"American Indian or Alaska Native" = "American Indian or Alaska Native",
"Asian or Pacific Islander" = "Asian or Pacific Islander",
"Black or African American" = "Black or African American",
"Hispanic" = "Hispanic" ,
"White" = "White"
)
#Importing STD data
ChlamydiaF <- read_delim("data/ChlamydiaF.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
ChlamydiaF = ChlamydiaF %>% mutate(Gender = "Female", Gender_Code = "F")
ChlamydiaM <- read_delim("data/ChlamydiaM.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
ChlamydiaM = ChlamydiaM %>% mutate(Gender = "Male", Gender_Code = "M")
ChlamydiaU <- read_delim("data/ChlamydiaU.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
ChlamydiaU = ChlamydiaU %>% mutate(Gender = "Unknown", Gender_Code = "U")
GonorrheaF <- read_delim("data/GonorrheaF.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
GonorrheaF = GonorrheaF %>% mutate(Gender = "Female", Gender_Code = "F")
GonorrheaM <- read_delim("data/GonorrheaM.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
GonorrheaM = GonorrheaM %>% mutate(Gender = "Male", Gender_Code = "M")
GonorrheaU <- read_delim("data/GonorrheaU.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
GonorrheaU = GonorrheaU %>% mutate(Gender = "Unknown", Gender_Code = "U")
SyphilisF <- read_delim("data/SyphilisF.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
SyphilisF = SyphilisF %>% mutate(Gender = "Female", Gender_Code = "F")
SyphilisM <- read_delim("data/SyphilisM.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
SyphilisM = SyphilisM %>% mutate(Gender = "Male", Gender_Code = "M")
SyphilisU <- read_delim("data/SyphilisU.txt",
"\t", escape_double = FALSE, col_types = cols(Age = col_character(),
`Age Code` = col_character(), Disease = col_character(),
`Disease Code` = col_skip(), Notes = col_skip(),
Population = col_integer(), `Race/Ethnicity` = col_character(),
`Race/Ethnicity Code` = col_skip(),
Rate = col_skip(), `STD Cases` = col_integer(),
State = col_character(), `State Code` = col_skip(),
Year = col_integer(), `Year Code` = col_skip()),
trim_ws = TRUE)
SyphilisU = SyphilisU %>% mutate(Gender = "Unknown",Gender_Code = "U")
#Combining all the data in one DT for the map
STD = bind_rows (ChlamydiaF, ChlamydiaM, ChlamydiaU, GonorrheaF, GonorrheaM, GonorrheaU, SyphilisF, SyphilisM, SyphilisU)
rm (ChlamydiaF, ChlamydiaM, ChlamydiaU, GonorrheaF, GonorrheaM, GonorrheaU, SyphilisF, SyphilisM, SyphilisU) #Closing the old tables
colnames (STD) = c("Disease", "State", "Year", "Race/Ethnicity", "Age", "Age_Code", "STD_Cases", "Population", "Gender", "Gender_Code")
#Janitoring the data
temp = which (is.na(STD$"Population"))
if (length(temp) != 0) #VÃ©rifiyng that the vector isn't empty
{STD = STD[-c(temp),]}
saveRDS(STD, "data/STD.rds")
library(shiny); runApp('server.R')
